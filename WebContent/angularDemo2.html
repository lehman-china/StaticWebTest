<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--  bootstrap css样式框架  -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<script src="js/inc/jquery-1.8.3.js"></script>
<script src="js/inc/angular.min.js"></script>

<script>
	function userController( $scope ) {
		$scope.selUser = {};
		// 模拟数据源,服务器数据
		$scope.users = [ {
			id : 1,
			name : '雷建军',
			age : 22
		}, {
			id : 2,
			name : '刘德华',
			age : 42
		}, {
			id : 3,
			name : '张学友',
			age : 43
		}, {
			id : 4,
			name : '黎明',
			age : 41
		}, {
			id : 5,
			name : '郭富城',
			age : 40
		}, ];
		$scope.editUser = function( id ) {
			$scope.selUser = $scope.users[getIndex( id )];
		};
		$scope.deleteUser = function( id ) {
			delete $scope.users.splice( getIndex( id ), 1 );
		};
		$scope.addUser = function() {
			var user = {
				id : new Date().getTime(),
				name : $scope.selUser.name,
				age : $scope.selUser.age
			};
			$scope.users.push( user );
		};
		/**
		 * 以userID ,查询对象在数组的索引位置
		 */
		function getIndex( id ) {
			for ( i in $scope.users ) {
				var user = $scope.users[i];
				if ( user.id == id ) {
					return i;
				}
			}
			return null;
		}
		/*// 监听变量, 变更 fName 的值就会响应方法
		 $scope.$watch( 'selUser', function() {
		 	alert( "测试监听指令:" );
		 } );
		 */
	}
</script>
</head>

<body ng-app="" ng-controller="userController">
	<div class="container">

		<h3>用户列表</h3>

		<table class="table table-striped  table-bordered">
			<thead>
				<tr>
					<th>操作</th>
					<th>编号</th>
					<th>名称</th>
					<th>年龄</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="user in users">
					<td>
						<button class="btn  btn-info" ng-click="editUser(user.id)">
							<span class="glyphicon glyphicon-pencil"></span>编辑
						</button>
						<button class="btn btn-danger" ng-click="deleteUser(user.id)">
							<span class="glyphicon glyphicon-trash"></span> 删除
						</button>
					</td>
					<td>{{ user.id }}</td>
					<td>{{ user.name }}</td>
					<td>{{ user.age }}</td>
				</tr>
			</tbody>
		</table>
		<h3>创建新用户:</h3>
		<form class="form-horizontal">
			<div class="form-group">
				<label class="col-sm-2 control-label">编号:</label>
				<div class="col-sm-10">
					<input type="text" ng-model="selUser.id" ng-disabled="true" placeholder="编号">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">名称:</label>
				<div class="col-sm-10">
					<input type="text" ng-model="selUser.name" placeholder="名称">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">年龄:</label>
				<div class="col-sm-10">
					<input type="text" ng-model="selUser.age" placeholder="年龄">
				</div>
			</div>
		</form>
		<hr>
		<button class="btn btn-success" ng-click="addUser()">
			<span class="glyphicon glyphicon-user"></span>创建新用户
		</button>
		<button class="btn btn-success" onclick="addUser()">测试按钮</button>

	</div>
</body>
</html>